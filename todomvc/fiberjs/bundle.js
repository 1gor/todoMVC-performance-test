!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=4)}([function(e,t,n){!function(t,n){e.exports=n()}(0,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=10)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.EventGateway=function(){function e(){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this)}return r(e,[{key:"trigger",value:function(e){var t=this;return new Promise(function(n,r){setTimeout(function(){return n(t.triggerSync(e))},0)})}},{key:"triggerSync",value:function(e){return this.element.dispatchEvent(e.event())}},{key:"listen",value:function(){for(var e=0;e<arguments.length;e+=2)this.addEventListener(arguments.length<=e?void 0:arguments[e],arguments.length<=e+1?void 0:arguments[e+1])}},{key:"addEventListener",value:function(t,n){var r=this,o=void 0,i=[];if("string"==typeof t)o=n,t.trim().split(/\s/).forEach(function(e){i.push(e),r.element.addEventListener(e,o)});else{if(!(t instanceof Event)&&t.namespace instanceof e)return t.namespace.addEventListener(t.event,n);o=function(e){return n(e.detail)},this.element.addEventListener(t.EventName,o),i.push(t.EventName)}return{callback:o,events:i,element:this.element}}}],[{key:"forElement",value:function(e,t){var n=new this;return n.name=t&&t.constructor.name,n.element=e,n}},{key:"forComponent",value:function(e){var t=new this;return t.name=e.constructor.name,t.element=e.view,t}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NameSpace=t.DefinedEvent=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(4),i=n(0),a=n(14),s=function(e){return e&&e.__esModule?e:{default:e}}(n(5)),u=t.DefinedEvent=(0,o.basicEvent)("Fiber:NameSpace:Defined");t.NameSpace=function(e){function t(e){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.name=e,n.eventPool=new a.EventPool,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.EventGateway),r(t,[{key:"defineState",value:function(e){var t=this;this.__state||(this.__state=new s.default),this.state=this.__state.reader,Object.getOwnPropertyNames(e).forEach(function(n){t.__state.addProperty(n);for(var r=e[n](t.__state.modifier),o=0;o<r.length;o+=2)t.addEventListener(r[o],r[o+1])}),this.trigger(new u)}},{key:"addEventListener",value:function(e,t){var n=[];return!(e instanceof o.Event)&&e.namespace instanceof i.EventGateway?e.namespace.addEventListener(e.event,t):(this.eventPool.addEventListener(e.EventName,t),n.push(e.EventName),{callback:t,events:n,element:this.eventPool})}},{key:"triggerSync",value:function(e){return this.eventPool.dispatchEvent(e)}}],[{key:"get",value:function(e){this.namespaces||(this.namespaces=new Map);var n=this.namespaces.get(e);return n||(n=new t(e),this.namespaces.set(e,n)),n}}]),t}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={components:new Map,listeners:new Map,observers:new Map,elementAttribute:"fiber-component-id"};r.init=function(){this.observe(document.body),this.init=!1},r.observe=function(e){var t=this,n=(this.observers.size+1).toString();if(!e._GC_observerId){e._GC_observerId=n;var r=new MutationObserver(function(e){e.forEach(function(e){e.removedNodes&&e.removedNodes.forEach(function(e){t.removeNode(e)})})});r.observe(e,{childList:!0,subtree:!0}),this.observers.set(n,{element:e,observer:r})}},r.removeNode=function(e){var t=this;if(e.querySelectorAll&&!e._GC_observerId){var n=function(e){var n=e.attributes[t.elementAttribute].value,r=t.components.get(n);r&&t.destroy(r)};e.querySelectorAll("["+this.elementAttribute+"]").forEach(n),e.attributes[this.elementAttribute]&&n(e)}},r.registerComponent=function(e){e.componentId=(++o).toString(),this.components.set(e.componentId,e),this.listeners.set(e.componentId,[]),e.view.setAttribute(this.elementAttribute,e.componentId),r.init&&r.init()},r.registerListener=function(e,t,n,r){this.listeners.has(e.componentId)&&this.listeners.get(e.componentId).push({element:t,eventName:function(e){return"string"==typeof e?e:e.EventName}(n),callback:r})},r.destroy=function(e){var t=!0,n=!1,r=void 0;try{for(var o,i=this.listeners.get(e.componentId)[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;a.element.removeEventListener(a.eventName,a.callback)}}catch(e){n=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw r}}e.view=null,this.components.delete(e.componentId),this.listeners.delete(e.componentId)},t.default=r;var o=0},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=n(1),a=n(7),s=function(){function e(){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this);for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];this.init.apply(this,n)}return r(e,[{key:"init",value:function(){}},{key:"listen",value:function(){}},{key:"on",value:function(e){return e instanceof a.EventFlowType?this.flow(e):e instanceof o.EventGateway||e instanceof a.EventFlow?e:(0,i.getNameSpaceByPath)(e)}},{key:"flow",value:function(e){return new a.EventFlow(e)}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){return function(t){function n(){return i(this,n),r(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return o(n,e),n}().alias("Event"+ ++f)}Object.defineProperty(t,"__esModule",{value:!0}),t.Event=void 0;var s=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.defineEventType=function(e){var t=Object.getOwnPropertyNames(e);return function(n){function a(){i(this,a);for(var n=r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this)),o=new c.default(n),u=arguments.length,f=Array(u),v=0;v<u;v++)f[v]=arguments[v];for(var h=0;h<f.length;h++){var p=t[h];if(void 0===p||void 0===e[p])throw new d(n,p,f[h]);var y=l.Optional.from(e[p]),m=s(y,2),b=m[0],w=m[1];if(o.addProperty(p),!b||void 0!==f[h]&&null!==f[h])if("Mixed"===w.name)o.modifier[p]=f[h];else if(w==Number||w==String||w==Boolean)o.modifier[p]=new w(f[h]).valueOf();else{if(w instanceof Object&&!(f[h]instanceof w))throw new d(n,p,f[h],w);o.modifier[p]=f[h]}else o.modifier[p]=f[h]}return n}return o(a,v),a}()},t.eventOfType=a,t.basicEvent=function(e){return function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,v),t}().alias(e||"Event"+ ++f)},t.defineEvent=function(e,t){return a(e).alias(t)};var c=function(e){return e&&e.__esModule?e:{default:e}}(n(5)),l=n(12),f=0,v=function(){function e(){i(this,e),this.name=this.constructor.EventName}return u(e,[{key:"event",value:function(){return this.originalEvent||(this.originalEvent=new CustomEvent(this.name,{detail:this,bubbles:!this.constructor._cancelBubble,cancelable:!0})),this.originalEvent}},{key:"stopPropagation",value:function(){this.originalEvent&&this.originalEvent.stopPropagation()}},{key:"preventDefault",value:function(){this.originalEvent&&this.originalEvent.preventDefault()}}],[{key:"bubbles",value:function(e){return this._cancelBubble=!e,this}},{key:"alias",value:function(e){return this.EventName=e,this}},{key:"on",value:function(e){return{namespace:e,event:this}}}]),e}();t.Event=v;var d=function(e){function t(e,n,o,a){if(i(this,t),a)s=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Type mismatch for Event '"+e.name+"' for attribute '"+n+"'"));else var s=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Unexpected parameter for Event '"+e.name+"'"));return s.event=e,s.name=n,s.value=o,s.type=a,r(s)}return o(t,Error),t}()},function(e,t,n){"use strict";function r(e){return e instanceof Object?new Proxy(e,{get:function(e,t){return r(e[t])},set:function(){return!0}}):e}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.readOnly=r;var i=function(e){return e&&e.__esModule?e:{default:e}}(n(6)),a=function(){function e(t){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.reader=t||{},this.modifier={}}return o(e,[{key:"addProperty",value:function(e){var t=this;this.modifier[e]=null,Object.defineProperty(this.reader,e,{get:function(){return(0,i.default)(t.modifier[e])},enumerable:!0})}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e){if(!(e instanceof Object)||e instanceof Function)return e;if(e instanceof Array)return e.map(function(e){return r(e)});if(e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||e instanceof Boolean)return new e.constructor(e);if(e.clone instanceof Function)return e.clone();var t={},n=!0,o=!1,i=void 0;try{for(var a,s=Object.getOwnPropertyNames(e)[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=a.value;t[u]=r(e[u])}}catch(e){o=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.EventFlow=t.EventFlowType=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=(n(4),n(0));t.EventFlowType=function e(){r(this,e);for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];this.steps=n,n.forEach(function(e){if(!(e.namespace instanceof i.EventGateway&&e.event.EventName))throw new Error("wrong argument for Flow step!")})},t.EventFlow=function(){function e(t){var n=this;r(this,e),this.steps=t.steps,this.currentEvent=null,this.currentNameSpace=null,this.promise=new Promise(function(e,t){n.resolve=e,n.reject=t})}return o(e,[{key:"trigger",value:function(e){var t=this.steps.shift();return t||this.reject(e),!e instanceof t.event&&this.reject(e),this.currentEvent=e,this.currentNameSpace=t.namespace,e.flow=this,this.currentNameSpace.trigger(e),this.steps.length||this.resolve(this),this.promise}},{key:"listen",value:function(){throw new Error("You can't set listeners on an EventFlow! (yet?)")}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=r(n(3)),c=n(0),l=(n(1),r(n(9))),f=r(n(2)),v=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,u.default),s(t,[{key:"render",value:function(){return this.constructor.template&&(this.view=l.default.render(this.constructor.template)),this.listen(),this.view}},{key:"getNameSpaceByPath",value:function(){return this.EventGateway||(this.EventGateway=c.EventGateway.forComponent(this))}},{key:"on",value:function(e){return(e=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"on",this).call(this,e))instanceof c.EventGateway?new d(this,e):e}},{key:"ui",value:function(e){var t=l.default.getElement(e||this.view,this.view);return t?new d(this,c.EventGateway.forElement(t,this)):null}},{key:"view",get:function(){return this._view},set:function(e){this._view=e,this.getNameSpaceByPath().element=e,e&&f.default.registerComponent(this)}},{key:"namespace",get:function(){return this.getNameSpaceByPath()}}],[{key:"elementName",value:function(){return this.name.replace("Component","").replace(/[A-Z]/g,"-$&").toLowerCase().substr(1)}},{key:"withTemplate",value:function(e){return function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,null,[{key:"__setTemplate",value:function(e){return this.template=e,this}}]),t}(this).__setTemplate(e)}},{key:"attachTo",value:function(e){e=l.default.getElement(e);for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=new(Function.prototype.bind.apply(this,[null].concat(n)));o._attached=!0;var i=this.template?l.default.render(this.template):null;return i?i.tagName==e.tagName?(e.replaceWith(i),o.view=i):(o.view=e,o.view.append(i)):o.view=e,o.listen(),o}},{key:"populate",value:function(e){var t=this;if(!e instanceof Element)return!1;var n=e.querySelectorAll(this.elementName());return e.tagName.toLowerCase()==this.elementName()&&(n=[e]),n.forEach(function(e){t.attachTo(e)}),n}}]),t}(),d=function(){function e(t,n){o(this,e),this.component=t,this.EventGateway=n}return s(e,[{key:"listen",value:function(){for(var e=this,t=arguments,n=0;n<arguments.length;n+=2)!function(n){var r=e.EventGateway.addEventListener(t.length<=n?void 0:t[n],t.length<=n+1?void 0:t[n+1]);r.events.forEach(function(t){return f.default.registerListener(e.component,r.element,t,r.callback)})}(n)}},{key:"trigger",value:function(e){return this.EventGateway.trigger(e)}},{key:"triggerSync",value:function(e){return this.EventGateway.triggerSync(e)}}]),e}();t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(2)),o={};o.getElement=function(e,t){return"string"==typeof e?(t||document).querySelector(e):e},o.render=function(e,t){if(e instanceof Element)return e;var n=document.createElement(t||"div");return n.innerHTML=e,t||1!=n.childElementCount?n:n.firstElementChild},o.renderWithComponents=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e=o.render(e);var i=!0,a=!1,s=void 0;try{for(var u,c=n[Symbol.iterator]();!(i=(u=c.next()).done);i=!0)u.value.populate(e)}catch(e){a=!0,s=e}finally{try{!i&&c.return&&c.return()}finally{if(a)throw s}}return e},o.detach=function(e){r.default.observe(e),e.remove()},t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(2)),i=r(n(11)),a=r(n(8)),s=n(1),u=n(4),c=n(7),l=r(n(6)),f=r(n(9)),v=r(n(13)),d={};d.GC=o.default,d.DataComponent=i.default,d.UIComponent=a.default,d.namespace=function(e){return s.NameSpace.get(e)},d.NameSpace={create:function(e){return s.NameSpace.get(e)},Defined:s.DefinedEvent},d.Event=u.Event,d.defineEvent=u.defineEvent,d.defineEventType=u.defineEventType,d.basicEvent=u.basicEvent,d.EventFlow={define:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return new(Function.prototype.bind.apply(c.EventFlowType,[null].concat(t)))}},d.clone=l.default,d.DOM=f.default,d.Debugger=v.default,d.System=s.NameSpace.get("data/system"),d.System.Ready=(0,u.basicEvent)("System:Ready");var h=d.DataComponent.attachTo(d.System);d.app=function(e){e(),h.on(d.System).trigger(new d.System.Ready)},t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){return e&&e.__esModule?e:{default:e}}(n(3)),i=n(0),a=n(1),s=function(e){function t(){return function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),r(t,[{key:"namespace",get:function(){return this.EventGateway}}],[{key:"attachTo",value:function(e){var t=new this;return t.EventGateway=e instanceof i.EventGateway?e:(0,a.getNameSpaceByPath)(e),t.listen(),t}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(t.Optional=function(e){return{$isOptional:!0,value:e}}).from=function(e){return e.$isOptional?[!0,e.value]:[!1,e]},t.Mixed=function e(){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(3)),i=r(n(8)),a=n(0),s={},u=null,c="font-weight: bold; color: black;",l="font-weight: normal; color: red;",f="font-weight: normal;";s.init=function(){o.default.prototype.$$on=o.default.prototype.on,o.default.prototype.on=function(e){return u=this,this.$$on(e)},i.default.prototype.$$ui=i.default.prototype.ui,i.default.prototype.ui=function(e){return u=this,this.$$ui(e)},o.default.prototype.$$flow=o.default.prototype.flow,o.default.prototype.flow=function(e){return u=this,this.$$flow(e)},a.EventGateway.prototype.$$triggerSync=a.EventGateway.prototype.triggerSync,a.EventGateway.prototype.triggerSync=function(e){var t=this.name&&"data/"+this.name||"DOM",n=u.constructor.name;return 1==n.length&&(n="FiberJS"),console.log(" %c"+e.name+" %ctriggered on %c"+t+"%c by %c"+n,"font-weight: bold; color: navy;",f,c,f,c),s.showEvents&&console.log(e),this.$$triggerSync(e)},a.EventGateway.prototype.$$addEventListener=a.EventGateway.prototype.addEventListener,a.EventGateway.prototype.addEventListener=function(e,t){var n="string"==typeof e,r=n?e:e.EventName,o=u.constructor.name,i=u.view;return this.$$addEventListener(e,function(e){return n?console.log(" %c"+r.replace(" ","/")+"%c was triggered on "+o,"font-weight: bold; color: navy;",f):i&&s.showView?console.log(" "+o+" listening for %c"+r,i,l):console.log(" %c"+o+"%c listening for %c"+r,"font-weight: bold; color: #2D602D;",f,l),console.log(" %c"+function(e){if(e.name)return e.name;try{return e.toString().match(/_this[0-9][.]([^(]*)[(]/).pop()}catch(e){return"[inline method]"}}(t)+"%c is called by "+o,"font-weight: bold; color: #d9534f;",f),t(e)})}},t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;r(this,e),this.listener=t,this.next=n}return o(e,[{key:"execute",value:function(e){this.listener(e),this.next&&this.next.execute(e)}},{key:"add",value:function(t){for(var n=this;n.next;)n=n.next;n.next=new e(t)}},{key:"without",value:function(e){for(var t=this,n=t,r=null;n;){if(n.listener==e)return null==r?t=n.next:r.next=n.next,t;r=n,n=n.next}return t}}],[{key:"with",value:function(t){return new e(t)}}]),e}();t.EventPool=function(){function e(){r(this,e),this.eventPool=new Map}return o(e,[{key:"addEventListener",value:function(e,t){this.eventPool.has(e)?this.eventPool.get(e).add(t):this.eventPool.set(e,i.with(t))}},{key:"removeEventListener",value:function(e,t){var n=this.eventPool.get(e);if(n){var r=n.without(t);r?this.eventPool.set(e,r):this.eventPool.delete(e)}}},{key:"dispatchEvent",value:function(e){var t=this.eventPool.get(e.name);t&&t.execute(e)}}]),e}()}])})},function(e,t,n){"use strict";var r=n(0);const o={Todo:n.n(r).a.namespace("data/todo")};t.a=o},function(e,t,n){"use strict";var r=n(0),o=n.n(r),i=n(12);const a={};a.Todo={},a.Todo.Add=o.a.defineEvent(i.a,"Todo:Add"),a.Todo.StateChange=o.a.defineEvent(i.c,"Todo:StateChange"),a.Todo.Remove=o.a.defineEvent(i.d,"Todo:Remove"),a.Todo.FilterList=o.a.defineEvent(i.b,"TodoList:Filter"),t.a=a},function(e,t,n){"use strict";let r=1;class o{constructor(e){this.id=e.id||++r,this.title=e.title,this.state=e.state||o.Active}clone(){return new o(this)}get completed(){return this.state==o.Completed}}o.Active="active",o.Completed="completed",t.a=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n.n(r),i=n(5),a=n(10),s=n(11);o.a.app(()=>{a.a.attachTo("#new-todo"),i.a.attachTo("#todo-list"),s.a.attachTo("#footer")}),window.Fiber=o.a},function(e,t,n){"use strict";var r=n(0),o=n.n(r),i=n(1),a=n(3),s=n(2),u=n(6);class c extends o.a.UIComponent{listen(){this.on(i.a.Todo).listen(s.a.Todo.FilterList,e=>this.filterTodos(e.state),s.a.Todo.Add,e=>this.addTodo(e.title),s.a.Todo.Remove,e=>this.removeTodo(e.todo))}addTodo(e){const t=new a.a({title:e}),n=new u.a(t),r=document.createElement("li");r.id=`todo-${t.id}`,r.appendChild(n.render()),this.view.appendChild(r)}removeTodo(e){this.view.querySelector(`#todo-${e.id}`).remove()}filterTodos(e){e?this.view.querySelectorAll("li > todo").forEach(t=>{t.parentElement.className=t.className==e?"":"hidden"}):this.view.querySelectorAll(".hidden").forEach(e=>{e.className=""})}clearTodos(){this.view.innerHTML=""}}t.a=c},function(e,t,n){"use strict";var r=n(0),o=n.n(r),i=n(3),a=n(1),s=n(2),u=n(7),c=n.n(u),l=n(8);const f=n(9).a.template(c.a,l.a);class v extends o.a.UIComponent{init(e){this.todo=e,this.view=f.render(this.todo)}listen(){this.ui("label").listen("dblclick",e=>this.setEditMode(!0)),this.ui(".edit").listen("keyup",e=>this.onEditorKeyUp(e),"blur",e=>this.cancelEditor()),this.ui(".toggle").listen("click",e=>this.toggleState(e)),this.ui(".destroy").listen("click",e=>this.destroy())}toggleState(e){this.todo.state=this.view.$.toggle.checked?i.a.Completed:i.a.Active,this.update(),this.on(a.a.Todo).triggerSync(new s.a.Todo.StateChange(this.todo.state))}setEditMode(e){this.view.className=`${this.todo.state} ${e?"editing":""}`,e&&this.view.$.editor.focus()}onEditorKeyUp(e){13==e.keyCode?(this.todo.title=this.view.$.editor.value,this.view.$.editor.value?this.update():this.destroy()):27==e.keyCode&&this.cancelEditor()}cancelEditor(){this.setEditMode(!1),this.view.$.editor.value=this.todo.title}update(){this.setEditMode(!1),this.view.apply(this.todo)}destroy(){this.on(a.a.Todo).triggerSync(new s.a.Todo.Remove(this.todo))}}t.a=v},function(e,t){e.exports='<todo>\n    <input var="toggle" class="toggle" type="checkbox"/>\n    <label var="label"></label>\n    <button var="destroy" class="destroy"></button>\n    <input var="editor" class="edit" type="text"/>\n</todo>\n'},function(e,t,n){"use strict";t.a=(e=>({title:[e.$.label,e.$.editor],state:(t,n)=>{e.className=t,e.$.toggle.checked=n.completed}}))},function(e,t,n){"use strict";function r(e){if(e instanceof Array)return e.slice();const t={};for(let n of Object.getOwnPropertyNames(e))t[n]="object"==typeof e[n]?r(e[n]):e[n];return t}const o={};o.template=function(e,t){return new i(e,t)};class i{constructor(e,t){this.html=this.processTemplate(e),this.patch=t}render(e){const t=this.html.cloneNode(!0);o.assignVariables(t);const n=new a(t,this.patch);return t.apply=(e=>n.apply(e)),e&&n.apply(e),t}processTemplate(e){return"string"==typeof e?function(e){var t=document.createElement("div");return t.innerHTML=e,1==t.childElementCount?t.firstElementChild:t}(e):e}}class a{constructor(e,t){this.view=e,this.patch=t(e),this.state={},this.methodify()}apply(e){let t=this.process(e);for(let n in t){if(!this.patch[n])continue;let r=t[n];this.patch[n](r,e)}}process(e){const t={},n=new Set;Object.getOwnPropertyNames(this.state).concat(Object.getOwnPropertyNames(e)).forEach(e=>{n.add(e)});for(let r of n)this.state[r]!=e[r]&&(t[r]=e[r]);return this.state=r(e),t}methodify(){for(let e of Object.getOwnPropertyNames(this.patch))if(this.patch[e]instanceof Array){const t=this.patch[e];this.patch[e]=(e=>{for(let n of t)!function(e,t){const n=n=>void 0!==e[n]&&(e[n]=t);n("value")||n("textContent")}(n,e)})}}}t.a=o,o.assignVariables=(e=>(e.$||(e.$={}),e.attributes.var&&(e.$[e.attributes.var.value]=e),e.querySelectorAll("[var]").forEach(t=>{e.$[t.attributes.var.value]=t}),e))},function(e,t,n){"use strict";var r=n(0),o=n.n(r),i=n(1),a=n(2);class s extends o.a.UIComponent{listen(){this.ui(this.view).listen("keypress",e=>this.onKeyPress(e))}onKeyPress(e){13==(e.charCode||e.keyCode)&&this.view.value.length&&(this.on(i.a.Todo).triggerSync(new a.a.Todo.Add(this.view.value)),this.view.value="")}}t.a=s},function(e,t,n){"use strict";var r=n(0),o=n.n(r),i=n(1),a=n(2),s=n(3);class u extends o.a.UIComponent{listen(){this.on(i.a.Todo).listen(a.a.Todo.Add,e=>this.refreshCounter(1),a.a.Todo.Remove,e=>this.todoRemoved(e.todo),a.a.Todo.StateChange,e=>this.stateChanged(e.newState)),this.ui("#filters").listen("click",e=>this.filterClick(e)),this.counter=this.view.querySelector("#todo-count strong")}filterClick(e){e.preventDefault();let t=e.target.id.substring(7);"all"===t&&(t=null),this.on(i.a.Todo).triggerSync(new a.a.Todo.FilterList(t)),this.resetFilters(),e.target.className="selected"}resetFilters(){this.view.querySelector(".selected").className=""}todoRemoved(e){e.completed||this.refreshCounter(-1)}stateChanged(e){this.refreshCounter(e==s.a.Active?1:-1)}refreshCounter(e){let t=e+parseInt(this.counter.textContent);this.counter.textContent=t}}t.a=u},function(e,t,n){"use strict";var r=n(0),o=n.n(r),i=n(13),a=(n.n(i),n(3));const s=o.a.defineEventType({state:Object(i.Optional)(String)});t.b=s,o.a.defineEventType({activeCount:Number});const u=o.a.defineEventType({todo:a.a});t.d=u;const c=o.a.defineEventType({title:String});t.a=c;const l=o.a.defineEventType({newState:String});t.c=l},function(e,t,n){!function(t,n){e.exports=n()}(0,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(t.Optional=function(e){return{$isOptional:!0,value:e}}).from=function(e){return e.$isOptional?[!0,e.value]:[!1,e]},t.Mixed=function e(){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this)}}])})}]);
