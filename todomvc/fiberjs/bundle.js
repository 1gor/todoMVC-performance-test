!function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}var installedModules={};__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=4)}([function(module,exports,__webpack_require__){!function(root,factory){module.exports=factory()}(0,function(){return function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=10)}([function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();exports.EventGateway=function(){function EventGateway(){_classCallCheck(this,EventGateway)}return _createClass(EventGateway,[{key:"trigger",value:function(fiberEvent){var _this=this;return new Promise(function(resolve,reject){setTimeout(function(){return resolve(_this.triggerSync(fiberEvent))},0)})}},{key:"triggerSync",value:function(fiberEvent){return this.element.dispatchEvent(fiberEvent.event())}},{key:"listen",value:function(){for(var i=0;i<arguments.length;i+=2)this.addEventListener(arguments.length<=i?void 0:arguments[i],arguments.length<=i+1?void 0:arguments[i+1])}},{key:"addEventListener",value:function(fiberEvent,eventHandler){var _this2=this,realHandler=void 0,events=[];return"string"==typeof fiberEvent?(realHandler=eventHandler,fiberEvent.trim().split(/\s/).forEach(function(strEvent){events.push(strEvent),_this2.element.addEventListener(strEvent,realHandler)})):!(fiberEvent instanceof Event)&&fiberEvent.namespace instanceof EventGateway?(realHandler=function(event){return eventHandler(event.detail)},fiberEvent.namespace.element.addEventListener(fiberEvent.event.EventName,realHandler),events.push(fiberEvent.EventName)):(realHandler=function(event){return eventHandler(event.detail)},this.element.addEventListener(fiberEvent.EventName,realHandler),events.push(fiberEvent.EventName)),{callback:realHandler,events:events}}}],[{key:"forElement",value:function(element,component){var instance=new this;return instance.name=component&&component.constructor.name,instance.element=element,instance}},{key:"forComponent",value:function(component){var instance=new this;return instance.name=component.constructor.name,instance.element=component.view,instance}}]),EventGateway}()},function(module,exports,__webpack_require__){"use strict";function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function detachEventGateway(path){var poolPath=path.split("/").slice(1),EventGateway=NameSpaceRoot,poolToDelete=poolPath.pop(),_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=poolPath[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var poolName=_step2.value;if(!EventGateway.children[poolName])return!1;EventGateway=EventGateway.children[poolName]}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}return EventGateway.children[poolToDelete]&&delete EventGateway.children[poolToDelete],!0}Object.defineProperty(exports,"__esModule",{value:!0}),exports.NameSpace=exports.DefinedEvent=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();exports.getNameSpaceByPath=function(path){var poolPath=path.split("/").slice(1),currentPath="data",EventGateway=NameSpaceRoot,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=poolPath[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var poolName=_step.value;if(currentPath+="/"+poolName,!EventGateway.children[poolName]){var newPool=new NameSpace(poolName,currentPath);EventGateway.children[poolName]=newPool,EventGateway.element.appendChild(newPool.element)}EventGateway=EventGateway.children[poolName]}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return EventGateway},exports.detachEventGateway=detachEventGateway;var _event=__webpack_require__(4),_eventGateway=__webpack_require__(0),_readOnly2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(5)),DefinedEvent=exports.DefinedEvent=(0,_event.basicEvent)("Fiber:NameSpace:Defined"),ListenerChain=function(){function ListenerChain(listener){var next=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;_classCallCheck(this,ListenerChain),this.listener=listener,this.next=next}return _createClass(ListenerChain,[{key:"execute",value:function(event){this.listener(event),this.next&&this.next.execute(event)}},{key:"concat",value:function(listener){for(var node=this;node.next;)node=node.next;node.next=ListenerChain.for(listener)}}],[{key:"for",value:function(listener){return new ListenerChain(listener)}}]),ListenerChain}(),EventPool=function(){function EventPool(){_classCallCheck(this,EventPool),this.eventPool=new Map}return _createClass(EventPool,[{key:"addEventListener",value:function(eventName,listener){this.eventPool.has(eventName)?this.eventPool.get(eventName).concat(listener):this.eventPool.set(eventName,ListenerChain.for(listener))}},{key:"dispatchEvent",value:function(fiberEvent){var chain=this.eventPool.get(fiberEvent.name);chain&&chain.execute(fiberEvent)}}]),EventPool}(),NameSpace=exports.NameSpace=function(_EventGateway){function NameSpace(name,path){_classCallCheck(this,NameSpace);var _this=_possibleConstructorReturn(this,(NameSpace.__proto__||Object.getPrototypeOf(NameSpace)).call(this));return _this.name=name,_this.path=path,_this.element=_this.createElement(name),_this.eventPool=new EventPool,_this.children={},_this}return _inherits(NameSpace,_eventGateway.EventGateway),_createClass(NameSpace,[{key:"detach",value:function(){delete this.element,detachEventGateway(this.path)}},{key:"createElement",value:function(name){var element=document.createElement(function(name){return"#"==name[0]?"item":name.toLowerCase().replace(/[^a-z0-9]/g,"")}(name));return element.id=function(name){return name.replace(/[^A-Za-z0-9/]/g,"").replace(/[/]/g,"-")}(name),element}},{key:"defineState",value:function(stateDefinition){var _this2=this;this.__state||(this.__state=new _readOnly2.default),this.state=this.__state.reader,Object.getOwnPropertyNames(stateDefinition).forEach(function(property){_this2.__state.addProperty(property);for(var setters=stateDefinition[property](_this2.__state.modifier),i=0;i<setters.length;i+=2)_this2.addEventListener(setters[i],setters[i+1])}),this.trigger(new DefinedEvent)}},{key:"addEventListener",value:function(fiberEvent,eventHandler){var events=[];return!(fiberEvent instanceof _event.Event)&&fiberEvent.namespace instanceof _eventGateway.EventGateway?fiberEvent.namespace.addEventListener(fiberEvent.event,eventHandler):(this.eventPool.addEventListener(fiberEvent.EventName,eventHandler),events.push(fiberEvent.EventName),{callback:eventHandler,events:events})}},{key:"triggerSync",value:function(fiberEvent){return this.eventPool.dispatchEvent(fiberEvent)}}]),NameSpace}(),NameSpaceRoot=new NameSpace("data")},function(module,exports,__webpack_require__){"use strict";function extractEventName(event){return"string"==typeof event?event:event.EventName}function generateComponentId(){return(++__id).toString()}Object.defineProperty(exports,"__esModule",{value:!0});var GC={components:new Map,listeners:new Map,observers:new Map,elementAttribute:"fiber-component-id"};GC.init=function(){this.observe(document.body),this.init=!1},GC.observe=function(element){var _this=this,observerId=(this.observers.size+1).toString();if(!element._GC_observerId){element._GC_observerId=observerId;var observer=new MutationObserver(function(mutations){mutations.forEach(function(mutation){mutation.removedNodes&&mutation.removedNodes.forEach(function(node){_this.removeNode(node)})})});observer.observe(element,{childList:!0,subtree:!0}),this.observers.set(observerId,{element:element,observer:observer})}},GC.removeNode=function(element){var _this2=this;if(element.querySelectorAll&&!element._GC_observerId){var processNode=function(view){var componentId=view.attributes[_this2.elementAttribute].value,component=_this2.components.get(componentId);component&&_this2.destroy(component)};element.querySelectorAll("["+this.elementAttribute+"]").forEach(processNode),element.attributes[this.elementAttribute]&&processNode(element)}},GC.registerComponent=function(component){component.componentId=generateComponentId(),this.components.set(component.componentId,component),this.listeners.set(component.componentId,[]),component.view.setAttribute(this.elementAttribute,component.componentId),GC.init&&GC.init()},GC.registerListener=function(component,element,event,callback){this.listeners.has(component.componentId)&&this.listeners.get(component.componentId).push({element:element,eventName:extractEventName(event),callback:callback})},GC.destroy=function(component){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.listeners.get(component.componentId)[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var listener=_step.value;listener.element.removeEventListener(listener.eventName,listener.callback)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}component.view=null,this.components.delete(component.componentId),this.listeners.delete(component.componentId)},exports.default=GC;var __id=0},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_eventGateway=__webpack_require__(0),_namespace=__webpack_require__(1),_eventFlow=__webpack_require__(7),ComponentInterface=function(){function ComponentInterface(){_classCallCheck(this,ComponentInterface);for(var _len=arguments.length,params=Array(_len),_key=0;_key<_len;_key++)params[_key]=arguments[_key];this.init.apply(this,params)}return _createClass(ComponentInterface,[{key:"init",value:function(){}},{key:"listen",value:function(){}},{key:"on",value:function(target){return target instanceof _eventFlow.EventFlowType?this.flow(target):target instanceof _eventGateway.EventGateway||target instanceof _eventFlow.EventFlow?target:(0,_namespace.getNameSpaceByPath)(target)}},{key:"flow",value:function(flowType){return new _eventFlow.EventFlow(flowType)}}]),ComponentInterface}();exports.default=ComponentInterface},function(module,exports,__webpack_require__){"use strict";function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function eventOfType(EventType){return function(_EventType){function _class(){return _classCallCheck(this,_class),_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).apply(this,arguments))}return _inherits(_class,EventType),_class}().alias("Event"+ ++eventId)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Event=void 0;var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i.return&&_i.return()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();exports.defineEventType=function(descriptor){var propNames=Object.getOwnPropertyNames(descriptor);return function(_Event){function DefinedEventClass(){_classCallCheck(this,DefinedEventClass);for(var _this2=_possibleConstructorReturn(this,(DefinedEventClass.__proto__||Object.getPrototypeOf(DefinedEventClass)).call(this)),readonly=new _readOnly2.default(_this2),_len=arguments.length,params=Array(_len),_key=0;_key<_len;_key++)params[_key]=arguments[_key];for(var i=0;i<params.length;i++){var paramName=propNames[i];if(void 0===paramName||void 0===descriptor[paramName])throw new EventAttributeError(_this2,paramName,params[i]);var _Optional$from=_domain.Optional.from(descriptor[paramName]),_Optional$from2=_slicedToArray(_Optional$from,2),optional=_Optional$from2[0],ParamType=_Optional$from2[1];if(readonly.addProperty(paramName),!optional||void 0!==params[i]&&null!==params[i])if("Mixed"===ParamType.name)readonly.modifier[paramName]=params[i];else if(ParamType==Number||ParamType==String||ParamType==Boolean)readonly.modifier[paramName]=new ParamType(params[i]).valueOf();else{if(ParamType instanceof Object&&!(params[i]instanceof ParamType))throw new EventAttributeError(_this2,paramName,params[i],ParamType);readonly.modifier[paramName]=params[i]}else readonly.modifier[paramName]=params[i]}return _this2}return _inherits(DefinedEventClass,Event),DefinedEventClass}()},exports.eventOfType=eventOfType,exports.basicEvent=function(name){return function(_Event2){function _class2(){return _classCallCheck(this,_class2),_possibleConstructorReturn(this,(_class2.__proto__||Object.getPrototypeOf(_class2)).apply(this,arguments))}return _inherits(_class2,Event),_class2}().alias(name||"Event"+ ++eventId)},exports.defineEvent=function(EventType,alias){return eventOfType(EventType).alias(alias)};var _readOnly2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(5)),_domain=__webpack_require__(12),eventId=0,Event=function(){function Event(){_classCallCheck(this,Event),this.name=this.constructor.EventName}return _createClass(Event,[{key:"event",value:function(){return this.originalEvent||(this.originalEvent=new CustomEvent(this.name,{detail:this,bubbles:!this.constructor._cancelBubble,cancelable:!0})),this.originalEvent}},{key:"stopPropagation",value:function(){this.originalEvent&&this.originalEvent.stopPropagation()}},{key:"preventDefault",value:function(){this.originalEvent&&this.originalEvent.preventDefault()}}],[{key:"bubbles",value:function(_bubbles){return this._cancelBubble=!_bubbles,this}},{key:"alias",value:function(name){return this.EventName=name,this}},{key:"on",value:function(namespace){return{namespace:namespace,event:this}}}]),Event}();exports.Event=Event;var EventAttributeError=function(_Error){function EventAttributeError(event,name,value,ParamType){if(_classCallCheck(this,EventAttributeError),ParamType)_this=_possibleConstructorReturn(this,(EventAttributeError.__proto__||Object.getPrototypeOf(EventAttributeError)).call(this,"Type mismatch for Event '"+event.name+"' for attribute '"+name+"'"));else var _this=_possibleConstructorReturn(this,(EventAttributeError.__proto__||Object.getPrototypeOf(EventAttributeError)).call(this,"Unexpected parameter for Event '"+event.name+"'"));return _this.event=event,_this.name=name,_this.value=value,_this.type=ParamType,_possibleConstructorReturn(_this)}return _inherits(EventAttributeError,Error),EventAttributeError}()},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function readOnly(original){return original instanceof Object?new Proxy(original,{get:function(target,property){return readOnly(target[property])},set:function(){return!0}}):original}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();exports.readOnly=readOnly;var _clone2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(6)),ReadOnly=function(){function ReadOnly(reader){_classCallCheck(this,ReadOnly),this.reader=reader||{},this.modifier={}}return _createClass(ReadOnly,[{key:"addProperty",value:function(name){var _this=this;this.modifier[name]=null,Object.defineProperty(this.reader,name,{get:function(){return(0,_clone2.default)(_this.modifier[name])},enumerable:!0})}}]),ReadOnly}();exports.default=ReadOnly},function(module,exports,__webpack_require__){"use strict";function clone(obj){if(!(obj instanceof Object)||obj instanceof Function)return obj;if(obj instanceof Array)return obj.map(function(item){return clone(item)});if(obj instanceof Number||obj instanceof String||obj instanceof Date||obj instanceof RegExp||obj instanceof Boolean)return new obj.constructor(obj);if(obj.clone instanceof Function)return obj.clone();var copied={},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=Object.getOwnPropertyNames(obj)[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var key=_step.value;copied[key]=clone(obj[key])}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return copied}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=clone},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.EventFlow=exports.EventFlowType=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_eventGateway=(__webpack_require__(4),__webpack_require__(0));exports.EventFlowType=function EventFlowType(){_classCallCheck(this,EventFlowType);for(var _len=arguments.length,steps=Array(_len),_key=0;_key<_len;_key++)steps[_key]=arguments[_key];this.steps=steps,steps.forEach(function(step){if(!(step.namespace instanceof _eventGateway.EventGateway&&step.event.EventName))throw new Error("wrong argument for Flow step!")})},exports.EventFlow=function(){function EventFlow(flowType){var _this=this;_classCallCheck(this,EventFlow),this.steps=flowType.steps,this.currentEvent=null,this.currentNameSpace=null,this.promise=new Promise(function(resolve,reject){_this.resolve=resolve,_this.reject=reject})}return _createClass(EventFlow,[{key:"trigger",value:function(fiberEvent){var step=this.steps.shift();return step||this.reject(fiberEvent),!fiberEvent instanceof step.event&&this.reject(fiberEvent),this.currentEvent=fiberEvent,this.currentNameSpace=step.namespace,fiberEvent.flow=this,this.currentNameSpace.trigger(fiberEvent),this.steps.length||this.resolve(this),this.promise}},{key:"listen",value:function(){throw new Error("You can't set listeners on an EventFlow! (yet?)")}}]),EventFlow}()},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;if(void 0!==getter)return getter.call(receiver)},_componentInterface2=_interopRequireDefault(__webpack_require__(3)),_eventGateway=__webpack_require__(0),_DOM2=(__webpack_require__(1),_interopRequireDefault(__webpack_require__(9))),_gc2=_interopRequireDefault(__webpack_require__(2)),UIComponent=function(_ComponentInterface){function UIComponent(){return _classCallCheck(this,UIComponent),_possibleConstructorReturn(this,(UIComponent.__proto__||Object.getPrototypeOf(UIComponent)).apply(this,arguments))}return _inherits(UIComponent,_componentInterface2.default),_createClass(UIComponent,[{key:"render",value:function(){return this.constructor.template&&(this.view=_DOM2.default.render(this.constructor.template)),this.listen(),this.view}},{key:"getNameSpaceByPath",value:function(){return this.EventGateway||(this.EventGateway=_eventGateway.EventGateway.forComponent(this))}},{key:"on",value:function(target){return(target=_get(UIComponent.prototype.__proto__||Object.getPrototypeOf(UIComponent.prototype),"on",this).call(this,target))instanceof _eventGateway.EventGateway?new EventGatewayAccessor(this,target):target}},{key:"ui",value:function(query){var element=_DOM2.default.getElement(query||this.view,this.view);return element?new EventGatewayAccessor(this,_eventGateway.EventGateway.forElement(element,this)):null}},{key:"view",get:function(){return this._view},set:function(element){this._view=element,this.getNameSpaceByPath().element=element,element&&_gc2.default.registerComponent(this)}},{key:"namespace",get:function(){return this.getNameSpaceByPath()}}],[{key:"elementName",value:function(){return this.name.replace("Component","").replace(/[A-Z]/g,"-$&").toLowerCase().substr(1)}},{key:"withTemplate",value:function(template){return function(_ref){function _class(){return _classCallCheck(this,_class),_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).apply(this,arguments))}return _inherits(_class,_ref),_createClass(_class,null,[{key:"__setTemplate",value:function(template){return this.template=template,this}}]),_class}(this).__setTemplate(template)}},{key:"attachTo",value:function(element){element=_DOM2.default.getElement(element);for(var _len=arguments.length,params=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)params[_key-1]=arguments[_key];var instance=new(Function.prototype.bind.apply(this,[null].concat(params)));instance._attached=!0;var renderedTemplate=this.template?_DOM2.default.render(this.template):null;return renderedTemplate?renderedTemplate.tagName==element.tagName?(element.replaceWith(renderedTemplate),instance.view=renderedTemplate):(instance.view=element,instance.view.append(renderedTemplate)):instance.view=element,instance.listen(),instance}},{key:"populate",value:function(parentElement){var _this3=this;if(!parentElement instanceof Element)return!1;var elements=parentElement.querySelectorAll(this.elementName());return parentElement.tagName.toLowerCase()==this.elementName()&&(elements=[parentElement]),elements.forEach(function(element){_this3.attachTo(element)}),elements}}]),UIComponent}(),EventGatewayAccessor=function(){function EventGatewayAccessor(component,pool){_classCallCheck(this,EventGatewayAccessor),this.component=component,this.EventGateway=pool}return _createClass(EventGatewayAccessor,[{key:"listen",value:function(){for(var _this4=this,_arguments=arguments,i=0;i<arguments.length;i+=2)!function(i){var listener=_this4.EventGateway.addEventListener(_arguments.length<=i?void 0:_arguments[i],_arguments.length<=i+1?void 0:_arguments[i+1]);listener.events.forEach(function(event){return _gc2.default.registerListener(_this4.component,_this4.EventGateway.element,event,listener.callback)})}(i)}},{key:"trigger",value:function(event){return this.EventGateway.trigger(event)}},{key:"triggerSync",value:function(event){return this.EventGateway.triggerSync(event)}}]),EventGatewayAccessor}();exports.default=UIComponent},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _gc2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(2)),DOM={};DOM.getElement=function(element,root){return"string"==typeof element?(root||document).querySelector(element):element},DOM.render=function(template,wrapper){if(template instanceof Element)return template;var parent=document.createElement(wrapper||"div");return parent.innerHTML=template,wrapper||1!=parent.childElementCount?parent:parent.firstElementChild},DOM.renderWithComponents=function(template){for(var _len=arguments.length,components=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)components[_key-1]=arguments[_key];template=DOM.render(template);var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=components[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)_step.value.populate(template)}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return template},DOM.detach=function(element){_gc2.default.observe(element),element.remove()},exports.default=DOM},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _gc2=_interopRequireDefault(__webpack_require__(2)),_dataComponent2=_interopRequireDefault(__webpack_require__(11)),_uiComponent2=_interopRequireDefault(__webpack_require__(8)),_namespace=__webpack_require__(1),_event=__webpack_require__(4),_eventFlow=__webpack_require__(7),_clone2=_interopRequireDefault(__webpack_require__(6)),_DOM2=_interopRequireDefault(__webpack_require__(9)),_debugger2=_interopRequireDefault(__webpack_require__(13)),Fiber={};Fiber.GC=_gc2.default,Fiber.DataComponent=_dataComponent2.default,Fiber.UIComponent=_uiComponent2.default,Fiber.namespace=_namespace.getNameSpaceByPath,Fiber.NameSpace={create:_namespace.getNameSpaceByPath,Defined:_namespace.DefinedEvent},Fiber.Event=_event.Event,Fiber.defineEvent=_event.defineEvent,Fiber.defineEventType=_event.defineEventType,Fiber.basicEvent=_event.basicEvent,Fiber.EventFlow={define:function(){for(var _len=arguments.length,steps=Array(_len),_key=0;_key<_len;_key++)steps[_key]=arguments[_key];return new(Function.prototype.bind.apply(_eventFlow.EventFlowType,[null].concat(steps)))}},Fiber.clone=_clone2.default,Fiber.DOM=_DOM2.default,Fiber.Debugger=_debugger2.default,Fiber.System=(0,_namespace.getNameSpaceByPath)("data/system"),Fiber.System.Ready=(0,_event.basicEvent)("System:Ready");var System=Fiber.DataComponent.attachTo(Fiber.System);Fiber.app=function(startupScript){startupScript(),System.on(Fiber.System).trigger(new Fiber.System.Ready)},exports.default=Fiber},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_componentInterface2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(3)),_eventGateway=__webpack_require__(0),_namespace=__webpack_require__(1),DataComponent=function(_ComponentInterface){function DataComponent(){return _classCallCheck(this,DataComponent),_possibleConstructorReturn(this,(DataComponent.__proto__||Object.getPrototypeOf(DataComponent)).apply(this,arguments))}return _inherits(DataComponent,_componentInterface2.default),_createClass(DataComponent,[{key:"namespace",get:function(){return this.EventGateway}}],[{key:"attachTo",value:function(target){var instance=new this;return instance.EventGateway=target instanceof _eventGateway.EventGateway?target:(0,_namespace.getNameSpaceByPath)(target),instance.listen(),instance}}]),DataComponent}();exports.default=DataComponent},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),(exports.Optional=function(value){return{$isOptional:!0,value:value}}).from=function(obj){return obj.$isOptional?[!0,obj.value]:[!1,obj]};exports.Mixed=function Mixed(){_classCallCheck(this,Mixed)}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function handlerToString(handler){if(handler.name)return handler.name;try{return handler.toString().match(/_this[0-9][.]([^(]*)[(]/).pop()}catch(e){return"[inline method]"}}Object.defineProperty(exports,"__esModule",{value:!0});var _componentInterface2=_interopRequireDefault(__webpack_require__(3)),_uiComponent2=_interopRequireDefault(__webpack_require__(8)),_eventGateway=__webpack_require__(0),Debugger={},actor=null,boldStyle="font-weight: bold; color: black;",eventStyle="font-weight: normal; color: red;",normalStyle="font-weight: normal;";Debugger.init=function(){_componentInterface2.default.prototype.$$on=_componentInterface2.default.prototype.on,_componentInterface2.default.prototype.on=function(path){return actor=this,this.$$on(path)},_uiComponent2.default.prototype.$$ui=_uiComponent2.default.prototype.ui,_uiComponent2.default.prototype.ui=function(path){return actor=this,this.$$ui(path)},_componentInterface2.default.prototype.$$flow=_componentInterface2.default.prototype.flow,_componentInterface2.default.prototype.flow=function(eventFlow){return actor=this,this.$$flow(eventFlow)},_eventGateway.EventGateway.prototype.$$triggerSync=_eventGateway.EventGateway.prototype.triggerSync,_eventGateway.EventGateway.prototype.triggerSync=function(fiberEvent){var poolName=this.name&&"data/"+this.name||"DOM",actorName=actor.constructor.name;return 1==actorName.length&&(actorName="FiberJS"),console.log(" %c"+fiberEvent.name+" %ctriggered on %c"+poolName+"%c by %c"+actorName,"font-weight: bold; color: navy;",normalStyle,boldStyle,normalStyle,boldStyle),Debugger.showEvents&&console.log(fiberEvent),this.$$triggerSync(fiberEvent)},_eventGateway.EventGateway.prototype.$$addEventListener=_eventGateway.EventGateway.prototype.addEventListener,_eventGateway.EventGateway.prototype.addEventListener=function(fiberEvent,handler){var nativeEvent="string"==typeof fiberEvent,eventName=nativeEvent?fiberEvent:fiberEvent.EventName,boundActor=actor.constructor.name,boundView=actor.view;return this.$$addEventListener(fiberEvent,function(event){return nativeEvent?console.log(" %c"+eventName.replace(" ","/")+"%c was triggered on "+boundActor,"font-weight: bold; color: navy;",normalStyle):boundView&&Debugger.showView?console.log(" "+boundActor+" listening for %c"+eventName,boundView,eventStyle):console.log(" %c"+boundActor+"%c listening for %c"+eventName,"font-weight: bold; color: #2D602D;",normalStyle,eventStyle),console.log(" %c"+handlerToString(handler)+"%c is called by "+boundActor,"font-weight: bold; color: #d9534f;",normalStyle),handler(event)})}},exports.default=Debugger}])})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _fiber2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(0)),NameSpace={System:_fiber2.default.namespace("data/system"),Todo:_fiber2.default.namespace("data/todo")};exports.default=NameSpace},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _todo2=_interopRequireDefault(__webpack_require__(6)),_todoList2=_interopRequireDefault(__webpack_require__(7)),Events={};Events.Todo=_todo2.default,Events.TodoList=_todoList2.default,exports.default=Events},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Todo=function(){function Todo(properties){_classCallCheck(this,Todo),this.id=properties.id,this.title=properties.title,this.state=properties.state||Todo.Active}return _createClass(Todo,[{key:"clone",value:function(){return new Todo(this)}},{key:"completed",get:function(){return this.state==Todo.Completed}}]),Todo}();Todo.Active="active",Todo.Completed="completed",exports.default=Todo},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _fiber2=_interopRequireDefault(__webpack_require__(0)),_namespace2=_interopRequireDefault(__webpack_require__(1)),_todo2=_interopRequireDefault(__webpack_require__(5)),_todoList2=_interopRequireDefault(__webpack_require__(9)),_newTodo2=_interopRequireDefault(__webpack_require__(14)),_todoToolbar2=_interopRequireDefault(__webpack_require__(15));_fiber2.default.app(function(){_todo2.default.attachTo(_namespace2.default.Todo),_newTodo2.default.attachTo("#new-todo"),_todoList2.default.attachTo("#todo-list"),_todoToolbar2.default.attachTo("#footer")}),window.Fiber=_fiber2.default},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i.return&&_i.return()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_fiber2=_interopRequireDefault(__webpack_require__(0)),_namespace2=_interopRequireDefault(__webpack_require__(1)),_events2=_interopRequireDefault(__webpack_require__(2)),_todo2=_interopRequireDefault(__webpack_require__(3)),TodoComponent=function(_Fiber$DataComponent){function TodoComponent(){return _classCallCheck(this,TodoComponent),_possibleConstructorReturn(this,(TodoComponent.__proto__||Object.getPrototypeOf(TodoComponent)).apply(this,arguments))}return _inherits(TodoComponent,_fiber2.default.DataComponent),_createClass(TodoComponent,[{key:"init",value:function(){this.todos=new Map,this._id=0}},{key:"listen",value:function(){var _this2=this;this.on(_namespace2.default.Todo).listen(_events2.default.Todo.Add,function(event){return _this2.add(event.title)},_events2.default.Todo.Update,function(event){return _this2.update(event.todo)},_events2.default.Todo.Remove,function(event){return _this2.remove(event.todo)},_events2.default.TodoList.Request,function(event){return _this2.prepareList(event)})}},{key:"add",value:function(title){var item=new _todo2.default({title:title,id:++this._id});this.todos.set(item.id,item),this.on(_namespace2.default.Todo).triggerSync(new _events2.default.Todo.Added(item)),this.on(_namespace2.default.Todo).triggerSync(new _events2.default.TodoList.ActiveCount(this.activeCount()))}},{key:"update",value:function(todo){var item=new _todo2.default(todo);this.todos.set(item.id,item);var UpdateEvent=_events2.default.Todo.Updated(item.id);this.on(_namespace2.default.Todo).triggerSync(new UpdateEvent(item)),this.on(_namespace2.default.Todo).triggerSync(new _events2.default.TodoList.ActiveCount(this.activeCount()))}},{key:"remove",value:function(todo){var item=new _todo2.default(todo);this.todos.delete(todo.id),this.on(_namespace2.default.Todo).triggerSync(new _events2.default.Todo.Removed(item)),this.on(_namespace2.default.Todo).triggerSync(new _events2.default.TodoList.ActiveCount(this.activeCount()))}},{key:"prepareList",value:function(requestEvent){var list=[],_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.todos.entries()[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var _step$value=_slicedToArray(_step.value,2),todo=(_step$value[0],_step$value[1]);requestEvent.state&&todo.state!=requestEvent.state||list.push(new _todo2.default(todo))}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}this.on(_namespace2.default.Todo).triggerSync(new _events2.default.TodoList.Ready(list))}},{key:"activeCount",value:function(){var activeCount=0,_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=this.todos.entries()[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var _step2$value=_slicedToArray(_step2.value,2);_step2$value[0];_step2$value[1].state==_todo2.default.Active&&++activeCount}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}return activeCount}}]),TodoComponent}();exports.default=TodoComponent},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _fiber2=_interopRequireDefault(__webpack_require__(0)),_todo2=_interopRequireDefault(__webpack_require__(3)),TodoEvent=_fiber2.default.defineEventType({todo:_todo2.default}),AddTodo=_fiber2.default.defineEventType({title:String}),TodoEvents={};TodoEvents.Add=_fiber2.default.defineEvent(AddTodo,"Todo:Add"),TodoEvents.Added=_fiber2.default.defineEvent(TodoEvent,"Todo:Added"),TodoEvents.Update=_fiber2.default.defineEvent(TodoEvent,"Todo:Update"),TodoEvents.Updated=function(id){return _fiber2.default.defineEvent(TodoEvent,"Todo:"+id+":Updated")},TodoEvents.Remove=_fiber2.default.defineEvent(TodoEvent,"Todo:Remove"),TodoEvents.Removed=_fiber2.default.defineEvent(TodoEvent,"Todo:Removed"),exports.default=TodoEvents},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _fiber2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(0)),_domain=__webpack_require__(8),TodoList=_fiber2.default.defineEventType({todos:Array}),TodoListRequest=_fiber2.default.defineEventType({state:(0,_domain.Optional)(String)}),ActiveCount=_fiber2.default.defineEventType({activeCount:Number});TodoList.Filter=_fiber2.default.defineEvent(TodoListRequest,"TodoList:Filter"),TodoList.Request=_fiber2.default.defineEvent(TodoListRequest,"TodoList:Request"),TodoList.Ready=_fiber2.default.defineEvent(TodoList,"TodoList:Ready"),TodoList.ActiveCount=_fiber2.default.defineEvent(ActiveCount,"TodoList:ActiveCount"),exports.default=TodoList},function(module,exports,__webpack_require__){!function(root,factory){module.exports=factory()}(0,function(){return function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=0)}([function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),(exports.Optional=function(value){return{$isOptional:!0,value:value}}).from=function(obj){return obj.$isOptional?[!0,obj.value]:[!1,obj]};exports.Mixed=function Mixed(){_classCallCheck(this,Mixed)}}])})},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_fiber2=_interopRequireDefault(__webpack_require__(0)),_namespace2=_interopRequireDefault(__webpack_require__(1)),_events2=_interopRequireDefault(__webpack_require__(2)),_todoItem2=_interopRequireDefault(__webpack_require__(10)),TodoListComponent=function(_Fiber$UIComponent){function TodoListComponent(){return _classCallCheck(this,TodoListComponent),_possibleConstructorReturn(this,(TodoListComponent.__proto__||Object.getPrototypeOf(TodoListComponent)).apply(this,arguments))}return _inherits(TodoListComponent,_fiber2.default.UIComponent),_createClass(TodoListComponent,[{key:"listen",value:function(){var _this2=this;this.on(_namespace2.default.Todo).listen(_events2.default.Todo.Added,function(event){return _this2.addTodo(event.todo)},_events2.default.Todo.Removed,function(event){return _this2.removeTodo(event.todo)},_events2.default.TodoList.Ready,function(event){return _this2.showTodoList(event.todos)})}},{key:"addTodo",value:function(todo){var todoComponent=new _todoItem2.default(todo),newItem=document.createElement("li");newItem.id="todo-"+todo.id,newItem.appendChild(todoComponent.render()),this.view.appendChild(newItem)}},{key:"removeTodo",value:function(todo){this.view.querySelector("#todo-"+todo.id).remove()}},{key:"clearTodos",value:function(){this.view.innerHTML=""}},{key:"showTodoList",value:function(todos){this.clearTodos();var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=todos[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var todo=_step.value;this.addTodo(todo)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}}]),TodoListComponent}();exports.default=TodoListComponent},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_fiber2=_interopRequireDefault(__webpack_require__(0)),_todo2=_interopRequireDefault(__webpack_require__(3)),_namespace2=_interopRequireDefault(__webpack_require__(1)),_events2=_interopRequireDefault(__webpack_require__(2)),_template2=_interopRequireDefault(__webpack_require__(11)),_todo4=_interopRequireDefault(__webpack_require__(12)),todoTemplate=_interopRequireDefault(__webpack_require__(13)).default.template(_template2.default,_todo4.default),TodoItemComponent=function(_Fiber$UIComponent){function TodoItemComponent(){return _classCallCheck(this,TodoItemComponent),_possibleConstructorReturn(this,(TodoItemComponent.__proto__||Object.getPrototypeOf(TodoItemComponent)).apply(this,arguments))}return _inherits(TodoItemComponent,_fiber2.default.UIComponent),_createClass(TodoItemComponent,[{key:"init",value:function(todo){this.todo=todo,this.view=todoTemplate.render(this.todo)}},{key:"listen",value:function(){var _this2=this;this.on(_namespace2.default.Todo).listen(_events2.default.Todo.Updated(this.todo.id),function(event){return _this2.update(event.todo)}),this.ui("label").listen("dblclick",function(event){return _this2.setEditMode(!0)}),this.ui(".edit").listen("keyup",function(event){return _this2.onEditorKeyUp(event)},"blur",function(event){return _this2.cancelEditor()}),this.ui(".toggle").listen("click",function(event){return _this2.toggleState(event)}),this.ui(".destroy").listen("click",function(event){return _this2.destroy()})}},{key:"toggleState",value:function(event){this.todo.state=this.view.$.toggle.checked?_todo2.default.Completed:_todo2.default.Active,this.on(_namespace2.default.Todo).triggerSync(new _events2.default.Todo.Update(this.todo))}},{key:"setEditMode",value:function(editing){this.view.className=this.todo.state+" "+(editing?"editing":""),editing&&this.view.$.editor.focus()}},{key:"onEditorKeyUp",value:function(event){13==event.keyCode?(this.todo.title=this.view.$.editor.value,this.view.$.editor.value?this.on(_namespace2.default.Todo).triggerSync(new _events2.default.Todo.Update(this.todo)):this.destroy()):27==event.keyCode&&this.cancelEditor()}},{key:"cancelEditor",value:function(){this.setEditMode(!1),this.view.$.editor.value=this.todo.title}},{key:"update",value:function(todo){this.setEditMode(!1),this.view.apply(todo)}},{key:"destroy",value:function(){this.on(_namespace2.default.Todo).triggerSync(new _events2.default.Todo.Remove(this.todo))}}]),TodoItemComponent}();exports.default=TodoItemComponent},function(module,exports){module.exports='<todo>\n    <input var="toggle" class="toggle" type="checkbox"/>\n    <label var="label"></label>\n    <button var="destroy" class="destroy"></button>\n    <input var="editor" class="edit" type="text"/>\n</todo>\n'},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=function(view){return{title:[view.$.label,view.$.editor],state:function(_state,todo){view.className=_state,view.$.toggle.checked=todo.completed}}}},function(module,__webpack_exports__,__webpack_require__){"use strict";function updateElement(element,value){const setProperty=prop=>void 0!==element[prop]&&(element[prop]=value);setProperty("value")||setProperty("textContent")}function generateDOM(html){var parent=document.createElement("div");return parent.innerHTML=html,1==parent.childElementCount?parent.firstElementChild:parent}function clone(obj){if(obj instanceof Array)return obj.slice();const copied={};for(let key of Object.getOwnPropertyNames(obj))copied[key]="object"==typeof obj[key]?clone(obj[key]):obj[key];return copied}Object.defineProperty(__webpack_exports__,"__esModule",{value:!0});const PatchIt={};PatchIt.template=function(html,patch){return new PatchTemplate(html,patch)};class PatchTemplate{constructor(html,patch){this.html=this.processTemplate(html),this.patch=patch}render(state){const view=this.html.cloneNode(!0);PatchIt.assignVariables(view);const viewPatch=new ViewPatch(view,this.patch);return view.apply=(state=>viewPatch.apply(state)),state&&viewPatch.apply(state),view}processTemplate(html){return"string"==typeof html?generateDOM(html):html}}class ViewPatch{constructor(view,patch){this.view=view,this.patch=patch(view),this.state={},this.methodify()}apply(state){let changes=this.process(state);for(let key in changes){if(!this.patch[key])continue;let change=changes[key];this.patch[key](change,state)}}process(newState){const changes={},allKeys=new Set;Object.getOwnPropertyNames(this.state).concat(Object.getOwnPropertyNames(newState)).forEach(key=>{allKeys.add(key)});for(let key of allKeys)this.state[key]!=newState[key]&&(changes[key]=newState[key]);return this.state=clone(newState),changes}methodify(){for(let key of Object.getOwnPropertyNames(this.patch))if(this.patch[key]instanceof Array){const elements=this.patch[key];this.patch[key]=(value=>{for(let element of elements)updateElement(element,value)})}}}__webpack_exports__.default=PatchIt,PatchIt.assignVariables=(parentElement=>(parentElement.$||(parentElement.$={}),parentElement.attributes.var&&(parentElement.$[parentElement.attributes.var.value]=parentElement),parentElement.querySelectorAll("[var]").forEach(element=>{parentElement.$[element.attributes.var.value]=element}),parentElement))},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_fiber2=_interopRequireDefault(__webpack_require__(0)),_namespace2=_interopRequireDefault(__webpack_require__(1)),_events2=_interopRequireDefault(__webpack_require__(2)),NewTodoComponent=function(_Fiber$UIComponent){function NewTodoComponent(){return _classCallCheck(this,NewTodoComponent),_possibleConstructorReturn(this,(NewTodoComponent.__proto__||Object.getPrototypeOf(NewTodoComponent)).apply(this,arguments))}return _inherits(NewTodoComponent,_fiber2.default.UIComponent),_createClass(NewTodoComponent,[{key:"listen",value:function(){var _this2=this;this.ui(this.view).listen("keypress",function(event){return _this2.onKeyPress(event)})}},{key:"onKeyPress",value:function(event){13==(event.charCode||event.keyCode)&&this.view.value.length&&(this.on(_namespace2.default.Todo).triggerSync(new _events2.default.Todo.Add(this.view.value)),this.view.value="")}}]),NewTodoComponent}();exports.default=NewTodoComponent},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_fiber2=_interopRequireDefault(__webpack_require__(0)),_namespace2=_interopRequireDefault(__webpack_require__(1)),_events2=_interopRequireDefault(__webpack_require__(2)),TodoToolbarComponent=function(_Fiber$UIComponent){function TodoToolbarComponent(){return _classCallCheck(this,TodoToolbarComponent),_possibleConstructorReturn(this,(TodoToolbarComponent.__proto__||Object.getPrototypeOf(TodoToolbarComponent)).apply(this,arguments))}return _inherits(TodoToolbarComponent,_fiber2.default.UIComponent),_createClass(TodoToolbarComponent,[{key:"listen",value:function(){var _this2=this;this.on(_namespace2.default.Todo).listen(_events2.default.TodoList.ActiveCount,function(event){return _this2.refreshCounter(event.activeCount)}),this.ui("#filters").listen("click",function(event){return _this2.filterClick(event)}),this.counter=this.view.querySelector("#todo-count strong")}},{key:"filterClick",value:function(event){event.preventDefault();var state=event.target.id.substring(7);"all"==state&&(state=null),this.on(_namespace2.default.Todo).triggerSync(new _events2.default.TodoList.Request(state)),this.view.querySelector(".selected").className="",event.target.className="selected"}},{key:"refreshCounter",value:function(activeCount){this.counter.textContent=activeCount}}]),TodoToolbarComponent}();exports.default=TodoToolbarComponent}]);